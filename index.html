<!-- Safety Supervisor Assistant Wireframe -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safety Supervisor Assistant</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <!-- Intro.js for scenario walkthroughs -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js/minified/introjs.min.css">
  <script src="https://cdn.jsdelivr.net/npm/intro.js/minified/intro.min.js"></script>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">
  <!-- Top Bar with Storyboard & Architecture Diagram Triggers -->
  <header class="flex items-center justify-between px-6 py-4 bg-gray-900 border-b border-gray-800">
    <div class="flex items-center gap-4">
      <!-- Storyboard Icon -->
      <button id="storyboardBtn" aria-label="Open storyboard panel" class="hover:bg-gray-800 rounded p-2 focus:outline-none" data-tooltip-id="storyboard-tooltip">
        <span class="text-2xl">üé¨</span>
      </button>
      <!-- Architecture Diagram Panel Trigger -->
      <button id="archBtn" aria-label="Open architecture diagram" class="hover:bg-gray-800 rounded p-2 focus:outline-none ml-2" data-tooltip-id="arch-tooltip">
        <svg class="w-7 h-7 inline" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/></svg>
      </button>
    </div>
    <h1 class="text-2xl font-bold tracking-tight">Safety Supervisor Assistant</h1>
    <!-- User Profile Avatar -->
    <div class="relative group">
      <button id="profileBtn" aria-label="Account menu" class="focus:outline-none rounded-full border-2 border-gray-700 hover:border-blue-400" data-tooltip-id="profile-tooltip">
        <img src="https://loremfaces.net/96/id/1.jpg" alt="User avatar" class="w-10 h-10 rounded-full" />
      </button>
      <!-- Account Dropdown (hidden by default) -->
      <div id="profileMenu" class="hidden absolute right-0 mt-2 w-48 bg-gray-800 rounded shadow-lg z-50">
        <a href="#" class="block px-4 py-2 text-gray-100 hover:bg-gray-700">Account Settings</a>
        <a href="#" class="block px-4 py-2 text-gray-100 hover:bg-gray-700">Admin Panel</a>
        <a href="#" class="block px-4 py-2 text-red-400 hover:bg-gray-700">Logout</a>
      </div>
    </div>
  </header>

  <div class="flex min-h-[calc(100vh-64px)]">
    <!-- Sidebar Navigation -->
    <nav class="w-64 bg-gray-900 border-r border-gray-800 flex flex-col py-6 px-4 space-y-2" aria-label="Sidebar">
        <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-800 focus:bg-gray-800" data-tooltip-id="sidebar-dashboard-tooltip">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M13 5v6h6"/></svg>
          <span>Dashboard</span>
        </a>
        <a href="briefings.html" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-800 focus:bg-gray-800" data-tooltip-id="sidebar-briefings-tooltip">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 17l4 4 4-4m0-5V3a1 1 0 00-1-1H5a1 1 0 00-1 1v16a1 1 0 001 1h3"/></svg>
          <span>Briefings</span>
        </a>
        <a href="alerts.html" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-800 focus:bg-gray-800" data-tooltip-id="sidebar-alerts-tooltip">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M12 8v4m0 4h.01"/></svg>
          <span>Live Alerts</span>
        </a>
        <a href="reports.html" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-800 focus:bg-gray-800" data-tooltip-id="sidebar-reports-tooltip">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a2 2 0 012-2h2a2 2 0 012 2v2m-6 4h6a2 2 0 002-2v-5a2 2 0 00-2-2h-2a2 2 0 00-2 2v5a2 2 0 002 2z"/></svg>
          <span>Reports</span>
        </a>
        <a href="settings.html" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-gray-800 focus:bg-gray-800" data-tooltip-id="sidebar-settings-tooltip">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01"/></svg>
          <span>Settings</span>
        </a>
      </nav>

    <!-- Main Content Area -->
    <main class="flex-1 p-8 overflow-y-auto">
      <!-- Dashboard Section -->
      <section id="dashboard-section" aria-labelledby="dashboard-title" class="mb-10">
        <!-- Added dynamic animations and interactive widgets to the Dashboard -->
        <div class="dashboard grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
          <!-- Daily Risk Score Panel with Visual Gauge using Tailwind Classes -->
          <div class="panel bg-gradient-to-r from-green-400 to-blue-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 animate-fade-in relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì reviews risk score, initiates mitigations</li>
                    <li><span class="font-medium">IT:</span> Data Scientist ‚Äì maintains scoring logic</li>
                    <li><span class="font-medium">Cross-functional:</span> Safety SME ‚Äì validates risk factors</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other sites? Will it handle 10√ó more data?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Summarize daily operational risk for quick review</li>
                    <li>Requires: Telemetry, incident logs, weather data</li>
                    <li class="text-xs text-gray-500">Prompt: Could this be parameterized for other risk types?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Reduces manual risk assessment workload</li>
                    <li class="text-red-600">‚Äì Risk: Over-trust in automated scores</li>
                    <li class="text-xs text-gray-500">Nudge: Show confidence, allow user override</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing dashboard?</li>
                    <li>Can this logic be handled by a low-code tool?</li>
                    <li>Will this still make sense in 6 months?</li>
                  </ul>
                </div>
              </div>
            </div>
            <h2 class="text-xl font-bold mb-2">Daily Risk Score</h2>
            
            <!-- Enhanced Interactive Visual Risk Gauge -->
            <div class="relative h-28 flex items-center justify-center mb-3">
              <!-- Background track with colored segments -->
              <div id="risk-slider-track" class="w-full h-6 rounded-full flex overflow-hidden shadow-inner cursor-pointer transition-all">
                <div class="bg-gradient-to-r from-green-600 to-green-400 h-full w-[33%]"></div>
                <div class="bg-gradient-to-r from-yellow-500 to-yellow-400 h-full w-[33%]"></div>
                <div class="bg-gradient-to-r from-red-500 to-red-400 h-full w-[34%]"></div>
              </div>
              
              <!-- Labels -->
              <div class="absolute flex justify-between w-full px-2 -mt-16">
                <span class="text-xs font-semibold text-green-400">Low Risk</span>
                <span class="text-xs font-semibold text-yellow-400">Moderate Risk</span>
                <span class="text-xs font-semibold text-red-400">High Risk</span>
              </div>
              
              <!-- Value labels -->
              <div class="absolute flex justify-between w-full px-2 mt-10">
                <span class="text-xs font-medium">0</span>
                <span class="text-xs font-medium">5</span>
                <span class="text-xs font-medium">10</span>
              </div>
              
              <!-- Slider indicator - positioned at 21% (2.1 out of 10) -->
              <div id="risk-slider-indicator" class="absolute transition-all duration-200" style="left: 21%;">
                <div class="flex flex-col items-center">
                  <span class="inline-block bg-white w-4 h-8 rounded-full border-2 border-blue-400 shadow-lg transform -translate-y-1 hover:scale-110 transition-transform"></span>
                  <span id="risk-slider-value" class="text-sm font-bold bg-blue-600 text-white rounded-full h-5 w-8 flex items-center justify-center mt-1">2.1</span>
                </div>
              </div>
            </div>
            
            <div class="text-center mb-3">
              <p id="risk-score-text" class="text-3xl font-extrabold">Low Risk (2.1/10)</p>
              <p class="text-xs flex items-center justify-center">
                <svg class="w-4 h-4 text-green-500 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
                </svg>
                7% lower than yesterday
              </p>
            </div>
            
            <!-- Risk Breakdown - Enhanced with Tooltip Info -->
            <div class="space-y-2 text-sm">
              <div>
                <div class="flex justify-between mb-1 items-center">
                  <span class="flex items-center">
                    Weather Conditions
                    <span class="ml-1 text-xs text-gray-300 cursor-help relative group">
                      <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      <span class="absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 text-xs text-white p-1 rounded w-40 z-10">
                        Combines temperature, precipitation, and wind data
                      </span>
                    </span>
                  </span>
                  <span class="font-medium">1.0/10</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3 bg-opacity-30 shadow-inner">
                  <div class="bg-green-500 h-3 rounded-full w-[10%] transition-all duration-500 ease-out"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-1 items-center">
                  <span class="flex items-center">
                    Equipment Failure
                    <span class="ml-1 text-xs text-gray-300 cursor-help relative group">
                      <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      <span class="absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 text-xs text-white p-1 rounded w-40 z-10">
                        Based on maintenance logs and equipment age
                      </span>
                    </span>
                  </span>
                  <span class="font-medium">3.5/10</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3 bg-opacity-30 shadow-inner">
                  <div class="bg-yellow-500 h-3 rounded-full w-[35%] transition-all duration-500 ease-out"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-1 items-center">
                  <span class="flex items-center">
                    Human Factors
                    <span class="ml-1 text-xs text-gray-300 cursor-help relative group">
                      <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      <span class="absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 text-xs text-white p-1 rounded w-40 z-10">
                        Includes fatigue, training, and compliance factors
                      </span>
                    </span>
                  </span>
                  <span class="font-medium">1.8/10</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3 bg-opacity-30 shadow-inner">
                  <div class="bg-green-500 h-3 rounded-full w-[18%] transition-all duration-500 ease-out"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Safety Achievement Panel -->
          <div class="panel bg-gradient-to-r from-emerald-400 to-green-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì tracks safety streaks</li>
                    <li><span class="font-medium">IT:</span> Software Engineer ‚Äì maintains achievement logic</li>
                    <li><span class="font-medium">Cross-functional:</span> Project Manager ‚Äì reports on milestones</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other teams? Will it handle more milestones?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Highlight safety achievements and progress</li>
                    <li>Requires: Incident logs, attendance data</li>
                    <li class="text-xs text-gray-500">Prompt: Is this tightly coupled to one site?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Motivates safe behavior with positive feedback</li>
                    <li class="text-red-600">‚Äì Risk: Overemphasis on streaks may hide near-misses</li>
                    <li class="text-xs text-gray-500">Nudge: Show context, not just streaks</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing recognition system?</li>
                    <li>Can this be automated with existing data?</li>
                    <li>Will this logic scale to multiple teams?</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="flex justify-between items-center mb-3">
              <h2 class="text-xl font-bold">Safety Achievement</h2>
              <button class="toggle-btn bg-white text-green-500 px-2 py-1 rounded-lg shadow-md hover:bg-green-100 text-xs" aria-label="Toggle safety milestones details" title="Toggle safety milestones details">Toggle</button>
            </div>
            
            <div class="flex items-center mb-3">
              <div class="mr-4 relative">
                <span class="text-5xl">üèÜ</span>
                <span class="absolute -top-1 -right-1 bg-yellow-300 text-green-700 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">30</span>
              </div>
              <div>
                <p class="text-xl font-bold">30 Days</p>
                <p class="text-sm">Incident-Free Streak!</p>
                <p class="text-xs mt-1">5,000+ safe work hours</p>
              </div>
            </div>
            
            <!-- Safety Progress Bars -->
            <div class="mt-3 space-y-2 bg-green-600 bg-opacity-20 p-3 rounded">
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span>PPE Compliance</span>
                  <span>98%</span>
                </div>
                <div class="w-full bg-white bg-opacity-30 rounded-full h-2">
                  <div class="bg-white h-2 rounded-full w-[98%]"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span>Safety Training</span>
                  <span>100%</span>
                </div>
                <div class="w-full bg-white bg-opacity-30 rounded-full h-2">
                  <div class="bg-white h-2 rounded-full w-full"></div>
                </div>
              </div>
            </div>
            
            <div class="content hidden">
              <div class="mt-3 space-y-2">
                <h3 class="text-sm font-semibold">Safety Milestones</h3>
                
                <div class="relative pl-6 border-l-2 border-white border-opacity-30">
                  <div class="mb-3">
                    <span class="absolute left-[-8px] top-0 w-4 h-4 bg-green-300 rounded-full"></span>
                    <p class="text-xs font-semibold">May 21, 2025</p>
                    <p class="text-sm">Today - All safety protocols followed</p>
                    <p class="text-xs bg-green-600 bg-opacity-40 rounded px-2 py-0.5 mt-1 inline-block">Perfect Score</p>
                  </div>
                  
                  <div class="mb-3">
                    <span class="absolute left-[-8px] top-0 w-4 h-4 bg-green-300 rounded-full"></span>
                    <p class="text-xs font-semibold">May 17, 2025</p>
                    <p class="text-sm">Team Safety Training Completed</p>
                    <p class="text-xs bg-green-600 bg-opacity-40 rounded px-2 py-0.5 mt-1 inline-block">100% Participation</p>
                  </div>
                  
                  <div>
                    <span class="absolute left-[-8px] top-0 w-4 h-4 bg-blue-400 rounded-full"></span>
                    <p class="text-xs font-semibold">May 15, 2025</p>
                    <p class="text-sm">New safety equipment installed</p>
                    <p class="text-xs bg-blue-600 bg-opacity-40 rounded px-2 py-0.5 mt-1 inline-block">Facility Upgrade</p>
                  </div>
                </div>
              </div>
              
              <div class="mt-3 text-xs text-right">
                <a href="#reports" class="underline">View safety performance report</a>
              </div>
            </div>
          </div>

          <!-- Weather Forecast Panel with Icons and Detailed Information -->
          <div class="panel bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì monitors weather impact</li>
                    <li><span class="font-medium">IT:</span> Data Analyst ‚Äì integrates weather data</li>
                    <li><span class="font-medium">Cross-functional:</span> Safety SME ‚Äì validates weather-related risks</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other sites? Will it handle 10√ó more data?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Provide weather forecast for operational planning</li>
                    <li>Requires: Weather API integration</li>
                    <li class="text-xs text-gray-500">Prompt: Could this be parameterized for other weather types?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Improves planning accuracy</li>
                    <li class="text-red-600">‚Äì Risk: Over-reliance on forecast data</li>
                    <li class="text-xs text-gray-500">Nudge: Show confidence, allow user override</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing dashboard?</li>
                    <li>Can this logic be handled by a low-code tool?</li>
                    <li>Will this still make sense in 6 months?</li>
                  </ul>
                </div>
              </div>
            </div>
            <h2 class="text-xl font-bold mb-3">Weather Forecast</h2>
            <div class="flex items-center mb-3">
              <span class="text-4xl mr-3">‚òÄÔ∏è</span>
              <div>
                <p class="text-2xl font-bold">25¬∞C</p>
                <p class="text-sm">Sunny, Clear Skies</p>
              </div>
            </div>
            <div class="grid grid-cols-3 gap-2 mt-2 text-center">
              <div class="bg-yellow-300 bg-opacity-30 rounded p-2">
                <p class="text-xs">Today</p>
                <span class="text-xl">‚òÄÔ∏è</span>
                <p class="text-xs">25¬∞C</p>
              </div>
              <div class="bg-yellow-300 bg-opacity-30 rounded p-2">
                <p class="text-xs">Tomorrow</p>
                <span class="text-xl">‚õÖ</span>
                <p class="text-xs">23¬∞C</p>
              </div>
              <div class="bg-yellow-300 bg-opacity-30 rounded p-2">
                <p class="text-xs">Wednesday</p>
                <span class="text-xl">üåßÔ∏è</span>
                <p class="text-xs">19¬∞C</p>
              </div>
            </div>
            <div class="mt-3 text-xs">
              <p><strong>Wind:</strong> 5 km/h NW ‚Ä¢ <strong>Humidity:</strong> 45%</p>
              <p id="clock" class="mt-2">Loading time...</p>
            </div>
          </div>

          <!-- Team Status Panel with Visual Representation -->
          <div class="panel bg-gradient-to-r from-purple-400 to-indigo-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì monitors team status</li>
                    <li><span class="font-medium">IT:</span> Data Analyst ‚Äì integrates personnel data</li>
                    <li><span class="font-medium">Cross-functional:</span> HR ‚Äì validates team roles</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other sites? Will it handle 10√ó more data?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Provide real-time team status for operational planning</li>
                    <li>Requires: Personnel tracking system</li>
                    <li class="text-xs text-gray-500">Prompt: Could this be parameterized for other team types?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Improves team coordination</li>
                    <li class="text-red-600">‚Äì Risk: Over-reliance on automated data</li>
                    <li class="text-xs text-gray-500">Nudge: Show confidence, allow user override</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing dashboard?</li>
                    <li>Can this logic be handled by a low-code tool?</li>
                    <li>Will this still make sense in 6 months?</li>
                  </ul>
                </div>
              </div>
            </div>
            <h2 class="text-xl font-bold mb-3">Team Status</h2>
            <div class="flex flex-col space-y-2">
              <div class="flex items-center justify-between bg-purple-600 bg-opacity-30 p-2 rounded">
                <div class="flex items-center">
                  <img src="https://loremfaces.net/96/id/1.jpg" alt="Team member" class="w-8 h-8 rounded-full mr-2" />
                  <div>
                    <p class="text-sm font-semibold">John Smith</p>
                    <p class="text-xs">Safety Inspector</p>
                  </div>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-500 text-white">Active</span>
              </div>
              
              <div class="flex items-center justify-between bg-purple-600 bg-opacity-30 p-2 rounded">
                <div class="flex items-center">
                  <img src="https://loremfaces.net/96/id/2.jpg" alt="Team member" class="w-8 h-8 rounded-full mr-2" />
                  <div>
                    <p class="text-sm font-semibold">Emily Johnson</p>
                    <p class="text-xs">Crane Operator</p>
                  </div>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-500 text-white">Break</span>
              </div>
              
              <div class="flex items-center justify-between bg-purple-600 bg-opacity-30 p-2 rounded">
                <div class="flex items-center">
                  <img src="https://loremfaces.net/96/id/3.jpg" alt="Team member" class="w-8 h-8 rounded-full mr-2" />
                  <div>
                    <p class="text-sm font-semibold">Michael Wilson</p>
                    <p class="text-xs">Site Manager</p>
                  </div>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-500 text-white">Active</span>
              </div>
            </div>
            <div class="mt-3 text-right text-xs">
              <p>12/15 team members on site</p>
            </div>
          </div>

          <!-- Quick Actions Panel with More Options -->
          <div class="panel bg-gradient-to-r from-teal-400 to-cyan-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì initiates quick actions</li>
                    <li><span class="font-medium">IT:</span> Data Analyst ‚Äì monitors action impact</li>
                    <li><span class="font-medium">Cross-functional:</span> Safety SME ‚Äì validates action criteria</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other actions? Will it handle 10√ó more data?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Provide quick access to critical actions</li>
                    <li>Requires: Action API integration</li>
                    <li class="text-xs text-gray-500">Prompt: Could this be parameterized for other action types?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Improves response time</li>
                    <li class="text-red-600">‚Äì Risk: Over-reliance on automated actions</li>
                    <li class="text-xs text-gray-500">Nudge: Show confidence, allow user override</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing dashboard?</li>
                    <li>Can this logic be handled by a low-code tool?</li>
                    <li>Will this still make sense in 6 months?</li>
                  </ul>
                </div>
              </div>
            </div>
            <h2 class="text-xl font-bold mb-3">Quick Actions</h2>
            
            <div class="grid grid-cols-2 gap-3">
              <button aria-label="Generate safety report" title="Generate safety report" class="bg-white text-teal-500 px-3 py-2 rounded-lg shadow-md hover:bg-teal-100 flex items-center justify-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                Generate Report
              </button>
              
              <button aria-label="Send safety alert" title="Send safety alert" class="bg-white text-teal-500 px-3 py-2 rounded-lg shadow-md hover:bg-teal-100 flex items-center justify-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
                Send Alert
              </button>
              
              <button aria-label="Emergency stop all operations" title="Emergency stop all operations" class="bg-white text-teal-500 px-3 py-2 rounded-lg shadow-md hover:bg-teal-100 flex items-center justify-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                Emergency Stop
              </button>
              
              <button aria-label="Schedule team briefing" title="Schedule team briefing" class="bg-white text-teal-500 px-3 py-2 rounded-lg shadow-md hover:bg-teal-100 flex items-center justify-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                Team Briefing
              </button>
              
              <button id="theme-toggle" aria-label="Toggle between dark and light mode" title="Toggle between dark and light mode" class="bg-white text-teal-500 px-3 py-2 rounded-lg shadow-md hover:bg-teal-100 flex items-center justify-center col-span-2">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                Toggle Dark/Light Mode
              </button>
            </div>
                        
            <div class="mt-3 text-xs">
              <p>Last Action: Report generated at 08:45</p>
            </div>
          </div>

          <!-- Enhanced Site Map Panel with Markers and Legend -->
          <div class="panel bg-gradient-to-r from-gray-400 to-gray-500 text-white p-4 rounded-lg shadow-lg transform transition-transform hover:scale-105 relative">
            <!-- Tooltip Icon and Panel -->
            <div class="absolute top-2 right-2 group z-20">
              <button class="focus:outline-none" aria-label="Show component tooltips">
                <span class="text-lg">üë•</span>
              </button>
              <div class="z-50 absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg p-4 text-left text-sm opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-opacity duration-200 text-gray-900">
                <!-- Task + Persona Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üë•</span> Task + Persona</div>
                  <ul class="list-disc list-inside ml-2">
                    <li><span class="font-medium">OT:</span> Operations Supervisor ‚Äì monitors site map</li>
                    <li><span class="font-medium">IT:</span> Data Analyst ‚Äì integrates map data</li>
                    <li><span class="font-medium">Cross-functional:</span> Safety SME ‚Äì validates map markers</li>
                  </ul>
                  <div class="mt-1 text-xs text-gray-500">Scale: Can this logic be reused for other sites? Will it handle 10√ó more data?</div>
                </div>
                <!-- Design Intent Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üéØ</span> Design Intent</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Provide interactive site map for operational planning</li>
                    <li>Requires: Map API integration</li>
                    <li class="text-xs text-gray-500">Prompt: Could this be parameterized for other map types?</li>
                  </ul>
                </div>
                <!-- AI Impact Tooltip -->
                <div class="mb-3">
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üß†</span> AI Impact</div>
                  <ul class="list-disc list-inside ml-2">
                    <li class="text-green-600">+ Improves situational awareness</li>
                    <li class="text-red-600">‚Äì Risk: Over-reliance on automated data</li>
                    <li class="text-xs text-gray-500">Nudge: Show confidence, allow user override</li>
                  </ul>
                </div>
                <!-- Implementation Helper Tooltip -->
                <div>
                  <div class="font-semibold flex items-center mb-1"><span class="mr-1">üõ†Ô∏è</span> Implementation Helper</div>
                  <ul class="list-disc list-inside ml-2">
                    <li>Is this duplicating an existing dashboard?</li>
                    <li>Can this logic be handled by a low-code tool?</li>
                    <li>Will this still make sense in 6 months?</li>
                  </ul>
                </div>
              </div>
            </div>
            <h2 class="text-xl font-bold mb-3">Site Map</h2>
            <div class="relative w-full h-64">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3153.835434509374!2d-122.419415484681!3d37.77492977975971!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80858064f0e0b1b1%3A0x4a0b1b1b1b1b1b1b!2sSafety%20Site!5e0!3m2!1sen!2sus!4v1620000000000!5m2!1sen!2sus" title="Interactive site map showing hazardous zones, emergency exits and site entrances" class="w-full h-full border-0 rounded-lg" allowfullscreen=""></iframe>
              <!-- Interactive Legend -->
              <div class="absolute bottom-4 left-4 bg-gray-800 bg-opacity-75 text-white p-2 rounded shadow">
                <h3 class="text-sm font-bold mb-1">Legend</h3>
                <ul class="text-xs space-y-1">
                  <li><span class="inline-block w-3 h-3 bg-red-500 rounded-full mr-2"></span>Hazardous Zone</li>
                  <li><span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-2"></span>Emergency Exit</li>
                  <li><span class="inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"></span>Site Entrance</li>
                </ul>
              </div>
              <!-- Map Controls -->
              <div class="absolute top-4 right-4 bg-gray-800 bg-opacity-75 text-white p-2 rounded shadow">
                <button aria-label="Zoom in on map" title="Zoom in on map" class="text-xs px-2 py-1 bg-blue-500 rounded hover:bg-blue-600">Zoom In</button>
                <button aria-label="Zoom out on map" title="Zoom out on map" class="text-xs px-2 py-1 bg-blue-500 rounded hover:bg-blue-600 ml-1">Zoom Out</button>
              </div>
            </div>
          </div>
        </div>
      </section>


      <!-- Settings Section -->

    </main>
  </div>

  <!-- Tooltips (populated by JS or static for now) -->
  <div id="tooltips-root"></div>

  <!-- Storyboard Modal (hidden by default) -->
  <div id="storyboardModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center">
    <div class="bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto p-8 relative">
      <button id="closeStoryboard" class="absolute top-4 right-4 text-gray-400 hover:text-white" aria-label="Close storyboard">&times;</button>
      <h2 class="text-2xl font-bold mb-4 flex items-center gap-2"><span>üé¨</span> Scenarios</h2>
      <!-- Scenarios content will be populated here -->
      <div class="space-y-6">
        <div class="bg-gray-800 rounded p-4">
          <h3 class="font-semibold text-lg mb-1">Investigate Temperature Spike</h3>
          <ul class="text-sm mb-2">
            <li><strong>Personas:</strong> Supervisor, Operator</li>
            <li><strong>Goal:</strong> Identify and mitigate overheating risk</li>
            <li><strong>Steps:</strong> Review alert ‚Üí Check timeline ‚Üí Generate briefing</li>
            <li><strong>AI Interactions:</strong> Model prediction, override option</li>
            <li><strong>Outcome:</strong> Risk reduced, incident logged</li>
            <li><strong>Alt Path:</strong> Alert ignored, system escalates</li>
          </ul>
          <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded" onclick="introJs().start()">Try Scenario</button>
        </div>
        <!-- Add more scenarios as needed -->
      </div>
    </div>
  </div>

  <!-- Architecture Diagram Modal (hidden by default) -->
  <div id="archModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center">
    <div class="bg-gray-900 rounded-lg shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto p-8 relative">
      <button id="closeArch" class="absolute top-4 right-4 text-gray-400 hover:text-white" aria-label="Close architecture diagram">&times;</button>
      <h2 class="text-2xl font-bold mb-4">Proposed High-Level Architecture for Safety Supervisor Assistant</h2>
      <!-- Placeholder for Azure architecture diagram -->
      <div class="flex flex-col md:flex-row gap-8">
        <div class="flex-1 flex items-center justify-center min-h-[300px] bg-gradient-to-br from-blue-900 to-gray-800 rounded-lg shadow-inner">
          <span class="text-gray-400">[Azure Architecture Diagram Here]</span>
        </div>
        <div class="flex-1">
          <h3 class="font-semibold mb-2">Component Justification</h3>
          <table class="w-full text-sm text-left border-separate border-spacing-y-2">
            <thead>
              <tr class="text-gray-300">
                <th>Component</th>
                <th>Role</th>
                <th>Justification</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Azure IoT Hub</td>
                <td>Ingest Edge Data</td>
                <td>Supports MQTT/OPC UA, scalable per-site ingestion</td>
              </tr>
              <tr>
                <td>Azure Stream Analytics</td>
                <td>Real-Time Data Processing</td>
                <td>Low-latency filtering, correlation, routing</td>
              </tr>
              <tr>
                <td>Azure Fabric</td>
                <td>Global Situational Awareness</td>
                <td>Open data layer for analytics, Copilot readiness</td>
              </tr>
              <tr>
                <td>Azure AI Studio</td>
                <td>Model Orchestration</td>
                <td>Trains, manages, explains AI models</td>
              </tr>
              <tr>
                <td>Azure Arc</td>
                <td>Hybrid Governance</td>
                <td>Consistent management across cloud/edge/on-prem</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="mt-6 text-xs text-gray-500">Icons: Microsoft Azure official icon set. Data flow: blue. Config flow: purple.</div>
    </div>
  </div>

  <!-- JS for modals and tooltips (to be implemented) -->
  <script>
    // Profile dropdown toggle
    document.getElementById('profileBtn').addEventListener('click', function() {
      const menu = document.getElementById('profileMenu');
      menu.classList.toggle('hidden');
    });
    // Storyboard modal toggle
    document.getElementById('storyboardBtn').addEventListener('click', function() {
      document.getElementById('storyboardModal').classList.remove('hidden');
    });
    document.getElementById('closeStoryboard').addEventListener('click', function() {
      document.getElementById('storyboardModal').classList.add('hidden');
    });
    // Architecture modal toggle
    document.getElementById('archBtn').addEventListener('click', function() {
      document.getElementById('archModal').classList.remove('hidden');
    });
    document.getElementById('closeArch').addEventListener('click', function() {
      document.getElementById('archModal').classList.add('hidden');
    });
    // Close dropdowns/modals on outside click
    document.addEventListener('click', function(event) {
      if (!event.target.closest('#profileBtn') && !event.target.closest('#profileMenu')) {
        document.getElementById('profileMenu').classList.add('hidden');
      }
    });
    // Sidebar navigation interactivity
    const navLinks = [
      { id: 'dashboard', section: 'dashboard-section' },
      { id: 'briefings', section: 'briefings-section' },
      { id: 'alerts', section: 'alerts-section' },
      { id: 'reports', section: 'reports-section' },
      { id: 'settings', section: 'settings-section' }
    ];
    navLinks.forEach(link => {
      document.querySelector(`a[href="#${link.id}"]`).addEventListener('click', function(e) {
        e.preventDefault();
        navLinks.forEach(l => {
          document.getElementById(l.section).classList.add('hidden');
        });
        document.getElementById(link.section).classList.remove('hidden');
      });
    });
    
    // Connect settings panel darkmode toggle with theme toggle
    document.addEventListener('DOMContentLoaded', function() {
      const darkModeCheckbox = document.getElementById('darkmode');
      if (darkModeCheckbox) {
        darkModeCheckbox.addEventListener('change', function() {
          if (this.checked !== document.body.classList.contains('bg-gray-950')) {
            document.getElementById('theme-toggle').click();
          }
        });
      }
    });

    // Real-Time Clock
    setInterval(() => {
      const clock = document.getElementById('clock');
      const cameraTimestamp = document.getElementById('camera-timestamp');
      const now = new Date();
      
      if (clock) {
        clock.textContent = now.toLocaleTimeString();
      }
      
      if (cameraTimestamp) {
        const formattedDate = now.getFullYear() + '-' + 
                             String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                             String(now.getDate()).padStart(2, '0');
        const formattedTime = String(now.getHours()).padStart(2, '0') + ':' + 
                             String(now.getMinutes()).padStart(2, '0') + ':' + 
                             String(now.getSeconds()).padStart(2, '0');
        cameraTimestamp.textContent = formattedDate + ' ' + formattedTime;
      }
    }, 1000);

    // Collapsible Panel
    document.querySelectorAll('.toggle-btn').forEach(button => {
      button.addEventListener('click', () => {
        const panel = button.closest('.panel');
        const content = panel.querySelector('.content');
        content.classList.toggle('hidden');
      });
    });
    
    // Briefings Template Buttons
    document.querySelectorAll('.template-btn').forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all template buttons
        document.querySelectorAll('.template-btn').forEach(btn => {
          btn.classList.remove('border-blue-400', 'border-2');
          btn.classList.add('bg-blue-700', 'bg-opacity-30');
        });
        
        // Add active class to clicked button
        this.classList.add('border-blue-400', 'border-2');
        this.classList.remove('bg-blue-700', 'bg-opacity-30');
        this.classList.add('bg-blue-600', 'bg-opacity-50');
        
        // Here we would normally load the template data
        const templateType = this.textContent.trim();
        console.log(`Loading ${templateType} template...`);
        
        // Just for demo - set form values based on template
        if (templateType.includes('High-Risk')) {
          document.getElementById('hazard-prediction').checked = true;
          document.getElementById('prev-incidents').checked = true;
          document.getElementById('hazards').value = 'Fall hazards, Heavy equipment';
          document.getElementById('briefing-target').value = 'all';
        } else if (templateType.includes('Confined Space')) {
          document.getElementById('hazard-prediction').checked = true;
          document.getElementById('prev-incidents').checked = true;
          document.getElementById('hazards').value = 'Oxygen deficiency, Toxic gases';
          document.getElementById('briefing-target').value = 'all';
        }
      });
    });
    
    // Briefings weather icon selection
    document.querySelectorAll('.weather-icons button').forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all weather buttons
        document.querySelectorAll('.weather-icons button').forEach(btn => {
          btn.classList.remove('bg-blue-700');
        });
        
        // Add active class to clicked button
        this.classList.add('bg-blue-700');
        
        // Update the weather input field
        const weatherEmoji = this.textContent.trim();
        let weatherText = '';
        
        switch(weatherEmoji) {
          case '‚òÄÔ∏è':
            weatherText = 'Sunny, 75¬∞F';
            break;
          case '‚õÖ':
            weatherText = 'Partly cloudy, 70¬∞F';
            break;
          case 'üåßÔ∏è':
            weatherText = 'Rainy, 65¬∞F';
            break;
          case '‚õàÔ∏è':
            weatherText = 'Thunderstorms, 68¬∞F';
            break;
          case '‚ùÑÔ∏è':
            weatherText = 'Snowy, 30¬∞F';
            break;
        }
        
        document.getElementById('weather').value = weatherText;
      });
    });
    
    // Activity tag quick add buttons
    document.querySelectorAll('.activity-tag').forEach(button => {
      button.addEventListener('click', function() {
        const activityInput = document.getElementById('activities');
        const tagText = this.textContent.trim().replace('+ ', '');
        
        // Check if already in the input field
        if (!activityInput.value.includes(tagText)) {
          // Add comma if there's already text
          if (activityInput.value && !activityInput.value.endsWith(', ')) {
            activityInput.value += ', ';
          }
          
          activityInput.value += tagText;
        }
      });
    });
    
    // Reports section interactive elements
    

    // Enhanced Interactive Risk Score Slider
    document.addEventListener('DOMContentLoaded', function() {
      // Find the slider elements
      const sliderTrack = document.getElementById('risk-slider-track');
      const sliderIndicator = document.getElementById('risk-slider-indicator');
      const sliderValue = document.getElementById('risk-slider-value');
      const riskScoreText = document.getElementById('risk-score-text');
      
      // Find the risk breakdown bars to update when slider changes
      const weatherRiskBar = document.querySelector('.dashboard .panel:first-child .space-y-2 div:nth-child(1) .bg-green-500, .dashboard .panel:first-child .space-y-2 div:nth-child(1) .bg-yellow-500, .dashboard .panel:first-child .space-y-2 div:nth-child(1) .bg-red-500');
      const equipmentRiskBar = document.querySelector('.dashboard .panel:first-child .space-y-2 div:nth-child(2) .bg-green-500, .dashboard .panel:first-child .space-y-2 div:nth-child(2) .bg-yellow-500, .dashboard .panel:first-child .space-y-2 div:nth-child(2) .bg-red-500');
      const humanRiskBar = document.querySelector('.dashboard .panel:first-child .space-y-2 div:nth-child(3) .bg-green-500, .dashboard .panel:first-child .space-y-2 div:nth-child(3) .bg-yellow-500, .dashboard .panel:first-child .space-y-2 div:nth-child(3) .bg-red-500');
      
      // Function to update risk breakdown bars
      function updateRiskBreakdowns(riskValue) {
        // Calculate proportional values for risk factors
        const weatherRisk = Math.min(Math.max((riskValue * 0.5).toFixed(1), 0), 10);
        const equipmentRisk = Math.min(Math.max((riskValue * 1.2).toFixed(1), 0), 10); 
        const humanRisk = Math.min(Math.max((riskValue * 0.8).toFixed(1), 0), 10);
        
        // Update the risk breakdown text and bars
        if (weatherRiskBar) {
          const weatherText = weatherRiskBar.closest('div').querySelector('.flex.justify-between span:last-child');
          if (weatherText) weatherText.textContent = weatherRisk + '/10';
          
          // Update width on the bar
          weatherRiskBar.style.width = (weatherRisk * 10) + '%';
          
          // Update color based on value
          weatherRiskBar.classList.remove('bg-green-500', 'bg-yellow-500', 'bg-red-500');
          if (weatherRisk > 6.6) weatherRiskBar.classList.add('bg-red-500');
          else if (weatherRisk > 3.3) weatherRiskBar.classList.add('bg-yellow-500');
          else weatherRiskBar.classList.add('bg-green-500');
        }
        
        if (equipmentRiskBar) {
          const equipText = equipmentRiskBar.closest('div').querySelector('.flex.justify-between span:last-child');
          if (equipText) equipText.textContent = equipmentRisk + '/10';
          
          equipmentRiskBar.style.width = (equipmentRisk * 10) + '%';
          
          equipmentRiskBar.classList.remove('bg-green-500', 'bg-yellow-500', 'bg-red-500');
          if (equipmentRisk > 6.6) equipmentRiskBar.classList.add('bg-red-500');
          else if (equipmentRisk > 3.3) equipmentRiskBar.classList.add('bg-yellow-500');
          else equipmentRiskBar.classList.add('bg-green-500');
        }
        
        if (humanRiskBar) {
          const humanText = humanRiskBar.closest('div').querySelector('.flex.justify-between span:last-child');
          if (humanText) humanText.textContent = humanRisk + '/10';
          
          humanRiskBar.style.width = (humanRisk * 10) + '%';
          
          humanRiskBar.classList.remove('bg-green-500', 'bg-yellow-500', 'bg-red-500');
          if (humanRisk > 6.6) humanRiskBar.classList.add('bg-red-500');
          else if (humanRisk > 3.3) humanRiskBar.classList.add('bg-yellow-500');
          else humanRiskBar.classList.add('bg-green-500');
        }
      }
      
      // Function to handle slider interaction
      function handleSliderInteraction(e) {
        // Calculate position as percentage of the track width
        const rect = sliderTrack.getBoundingClientRect();
        const position = (e.clientX - rect.left) / rect.width;
        const percentage = Math.min(Math.max(position * 100, 0), 100);
        
        // Calculate risk value (0-10 scale)
        const riskValue = (position * 10).toFixed(1);
        
        // Update indicator position with smooth animation
        sliderIndicator.style.left = `${percentage}%`;
        
        // Update the risk value label
        sliderValue.textContent = riskValue;
        
        // Calculate risk level based on value
        let riskLevel = "Low";
        if (riskValue > 6.6) riskLevel = "High";
        else if (riskValue > 3.3) riskLevel = "Moderate";
        
        // Update risk score text
        riskScoreText.textContent = `${riskLevel} Risk (${riskValue}/10)`;
        
        // Update color of the panel based on risk level
        const panel = document.querySelector('.dashboard .panel:first-child');
        if (panel) {
          panel.classList.remove('from-green-400', 'from-yellow-400', 'from-red-400');
          panel.classList.remove('to-blue-500', 'to-orange-500', 'to-pink-500');
          
          if (riskLevel === "High") {
            panel.classList.add('from-red-400', 'to-pink-500');
            sliderValue.classList.remove('bg-blue-600', 'bg-yellow-500');
            sliderValue.classList.add('bg-red-600');
          } else if (riskLevel === "Moderate") {
            panel.classList.add('from-yellow-400', 'to-orange-500');
            sliderValue.classList.remove('bg-blue-600', 'bg-red-600');
            sliderValue.classList.add('bg-yellow-500');
          } else {
            panel.classList.add('from-green-400', 'to-blue-500');
            sliderValue.classList.remove('bg-yellow-500', 'bg-red-600');
            sliderValue.classList.add('bg-blue-600');
          }
        }
        
        // Update risk breakdowns
        updateRiskBreakdowns(parseFloat(riskValue));
        
        // Add a subtle animation to the panel
        if (panel) {
          panel.classList.add('scale-[1.01]');
          setTimeout(() => {
            panel.classList.remove('scale-[1.01]');
          }, 200);
        }
      }
      
      // Make the slider interactive
      if (sliderTrack && sliderIndicator) {
        // Click event for the track
        sliderTrack.addEventListener('click', handleSliderInteraction);
        
        // Mouse move for dragging (with mouse button pressed)
        let isDragging = false;
        
        sliderIndicator.addEventListener('mousedown', function() {
          isDragging = true;
          document.body.style.userSelect = 'none'; // Prevent text selection while dragging
        });
        
        document.addEventListener('mouseup', function() {
          isDragging = false;
          document.body.style.userSelect = '';
        });
        
        document.addEventListener('mousemove', function(e) {
          if (isDragging) {
            handleSliderInteraction(e);
          }
        });
        
        // Add hover effect to the track
        sliderTrack.addEventListener('mouseover', function() {
          this.classList.add('shadow-md', 'opacity-95');
        });
        
        sliderTrack.addEventListener('mouseout', function() {
          this.classList.remove('shadow-md', 'opacity-95');
        });
        
        // Add a pulsing animation to the indicator on page load
        setTimeout(() => {
          sliderIndicator.querySelector('span:first-child').classList.add('animate-pulse');
          setTimeout(() => {
            sliderIndicator.querySelector('span:first-child').classList.remove('animate-pulse');
          }, 2000);
        }, 1000);
      }
    });

    // Dark/Light Mode Toggle
    document.getElementById('theme-toggle').addEventListener('click', () => {
      // Toggle body classes
      document.body.classList.toggle('bg-gray-950');
      document.body.classList.toggle('bg-white');
      document.body.classList.toggle('text-gray-100');
      document.body.classList.toggle('text-gray-900');
      
      // Toggle navigation background
      document.querySelector('nav').classList.toggle('bg-gray-900');
      document.querySelector('nav').classList.toggle('bg-gray-100');
      document.querySelector('nav').classList.toggle('border-gray-800');
      document.querySelector('nav').classList.toggle('border-gray-300');
      
      // Toggle header background
      document.querySelector('header').classList.toggle('bg-gray-900');
      document.querySelector('header').classList.toggle('bg-gray-100');
      document.querySelector('header').classList.toggle('border-gray-800');
      document.querySelector('header').classList.toggle('border-gray-300');
      
      // Update toggle button icon
      const icon = document.querySelector('#theme-toggle svg path');
      if (document.body.classList.contains('bg-white')) {
        icon.setAttribute('d', 'M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z');
      } else {
        icon.setAttribute('d', 'M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z');
      }
      
      // Toggle checkbox in settings
      const darkModeCheckbox = document.getElementById('darkmode');
      if (darkModeCheckbox) {
        darkModeCheckbox.checked = document.body.classList.contains('bg-gray-950');
      }
    });
  </script>
</body>
</html>
<!--
  - Dashboard, sidebar, modals, and tooltips scaffolded
  - Next: Add Briefings, Live Alerts, Reports sections, and tooltips for each component
-->